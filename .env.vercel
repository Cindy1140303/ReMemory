# Vercel 環境變數設定

## 必要設定

### 資料庫配置
DATABASE_TYPE=mongodb
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/lifemap?retryWrites=true&w=majority
MONGODB_DB_NAME=lifemap

### API Keys (可選)
GEMINI_API_KEY=your_gemini_api_key_here
HF_API_KEY=your_huggingface_api_key_here

## MongoDB Atlas 設定步驟

1. 註冊 MongoDB Atlas: https://cloud.mongodb.com/
2. 創建免費 M0 Cluster
3. 設定資料庫使用者 (Database Access)
4. 設定網路存取 (Network Access) - 允許所有 IP (0.0.0.0/0)
5. 獲取連線字串 (Connect -> Connect your application)
6. 將連線字串設定到 MONGODB_URI

## Vercel 部署步驟

1. 安裝 Vercel CLI:
   ```bash
   npm i -g vercel
   ```

2. 登入 Vercel:
   ```bash
   vercel login
   ```

3. 部署專案:
   ```bash
   vercel --prod
   ```

4. 在 Vercel Dashboard 設定環境變數:
   - Project Settings -> Environment Variables
   - 新增上述環境變數

## 本地測試 Vercel 函數

```bash
# 安裝 vercel
npm i -g vercel

# 本地開發
vercel dev
```

## 前端 API 端點切換

修改 `www/index.html` 中的 `API_ENDPOINTS.current`:

```javascript
const API_ENDPOINTS = {
  local: "http://127.0.0.1:8010",
  vercel: "https://your-vercel-url.vercel.app", // 替換為你的 Vercel URL
  current: "vercel" // 切換到雲端版本
};
```